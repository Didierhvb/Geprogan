import{u as Q,f as v,g as L,h as W,c as n,o as a,a as t,e as $,t as u,F as h,i as m,j as X,v as Z,d as f,w as k,r as tt,k as x,l as et,n as A,m as z,p as B,q as ot,s as F}from"./index-Na7mEAWg.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";const at={class:"dashboard-container"},nt={class:"surface-panel"},it={class:"dashboard-header"},lt={class:"header-actions"},ct=["disabled"],rt={class:"stats-grid"},dt={class:"stat-content"},ut={class:"stat-value"},pt={class:"stat-label"},vt={class:"trend-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ht={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},mt={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},ft={class:"dashboard-row"},kt={class:"surface-panel chart-panel"},_t={class:"panel-header"},bt={class:"panel-actions"},gt=["value"],yt={class:"chart-container"},wt={key:0,class:"chart-empty"},Ct={key:1,class:"simple-chart"},Mt={class:"chart-bars"},Dt=["title"],Vt={class:"bar-value"},xt={class:"chart-labels"},At={class:"surface-panel activity-panel"},Ft={class:"panel-header"},It={class:"activity-list"},St={key:0,class:"activity-empty"},jt={key:1,class:"activity-items"},Lt={class:"activity-content"},$t={class:"activity-title"},zt={class:"activity-description"},Bt={class:"activity-time"},Gt={class:"surface-panel distribution-panel"},Ht={class:"panel-header"},Tt={class:"panel-actions"},Nt={class:"distribution-content"},qt={class:"distribution-chart"},Pt={key:0,class:"chart-empty"},Rt={key:1,class:"pie-chart-container"},Et={class:"pie-chart"},Yt=["title"],Jt={class:"pie-legend"},Ot={class:"legend-label"},Ut={class:"legend-value"},Kt={class:"surface-panel quick-actions-panel"},Qt={class:"quick-actions-grid"},Wt={__name:"DashboardView",setup(Xt){const{token:G}=Q(),{pushToast:M}=et(),y=v(!0),I=v(new Date().getFullYear()),w=v("farm"),S=v([]),_=v([]),D=v([]),C=v([]),H=L(()=>{const s=new Date().getFullYear();return[s-2,s-1,s]}),T=L(()=>Math.max(..._.value.map(s=>s.value),1));async function V(){y.value=!0;try{const s=G.value,[o,i,e]=await Promise.all([x.list(s),x.fincas(s),x.tipos(s)]);N(o,i,e),j(),q(o),P(o,i,e)}catch(s){M(s.message||"Error al cargar el dashboard","error")}finally{y.value=!1}}function N(s,o,i){const e=s.length,l=o.length;i.length;const c=s.filter(d=>d.sexo==="M").length,r=s.filter(d=>d.sexo==="H").length;S.value=[{id:"total-ganado",label:"Total Ganado",value:e.toLocaleString(),icon:"LivestockIcon",colorClass:"stat-primary",trend:5.2,trendClass:"trend-up"},{id:"total-fincas",label:"Fincas Activas",value:l.toLocaleString(),icon:"FarmIcon",colorClass:"stat-success",trend:2.1,trendClass:"trend-up"},{id:"machos",label:"Machos",value:c.toLocaleString(),icon:"MaleIcon",colorClass:"stat-info",trend:null},{id:"hembras",label:"Hembras",value:r.toLocaleString(),icon:"FemaleIcon",colorClass:"stat-warning",trend:null}]}function j(){const s=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];_.value=s.map(o=>({month:o,value:Math.floor(Math.random()*500)+100}))}function q(s){const o=[{type:"birth",icon:"PlusIcon",title:"Nuevo nacimiento",description:"Ternero registrado en Finca La Esperanza"},{type:"health",icon:"HeartIcon",title:"Vacunación completa",description:"Lote #12 - Aplicación de vacunas"},{type:"production",icon:"DropIcon",title:"Registro de producción",description:"250L de leche recolectados"},{type:"movement",icon:"ArrowIcon",title:"Traslado de ganado",description:"5 animales movidos a Finca San José"}];D.value=o.map((i,e)=>({...i,id:e+1,date:new Date(Date.now()-Math.random()*7*24*60*60*1e3)}))}function P(s,o,i){let e=[];if(w.value==="farm"){const c={};s.forEach(r=>{const d=r.idfinca||r.Idfinca,p=o.find(g=>g.id===d||g.idfinca===d),b=p?p.nombreFinca||p.nombre||`Finca ${d}`:`Finca ${d}`;c[b]=(c[b]||0)+1}),e=Object.entries(c)}else{const c={};s.forEach(r=>{const d=r.idtipoGanado||r.IdtipoGanado||r.idtipo,p=i.find(g=>g.id===d||g.idtipo===d),b=p?p.nombre||p.descripcion||`Tipo ${d}`:`Tipo ${d}`;c[b]=(c[b]||0)+1}),e=Object.entries(c)}const l=e.reduce((c,[,r])=>c+r,0);C.value=e.map(([c,r])=>({name:c,value:r,percentage:l>0?Math.round(r/l*100):0}))}function R(){w.value=w.value==="farm"?"type":"farm",V()}function E(){j()}function Y(){V()}function J(){M("Generando reporte...","info"),setTimeout(()=>{M("Reporte generado exitosamente","success")},2e3)}function O(s){const i=new Date-s,e=Math.floor(i/(1e3*60*60)),l=Math.floor(e/24);return l>0?`Hace ${l} día${l>1?"s":""}`:e>0?`Hace ${e} hora${e>1?"s":""}`:"Hace un momento"}function U(s,o){const i=["#4a7c59","#8fbc8f","#d2b48c","#cd853f","#daa520","#6b8e23"];return{backgroundColor:i[o%i.length],flex:s.percentage}}function K(s){const o=["#4a7c59","#8fbc8f","#d2b48c","#cd853f","#daa520","#6b8e23"];return o[s%o.length]}return W(()=>{V()}),(s,o)=>{const i=tt("router-link");return a(),n("div",at,[t("section",nt,[t("div",it,[o[2]||(o[2]=t("div",{class:"header-content"},[t("div",{class:"stat-chip"},"Panel principal"),t("h1",{class:"hero-title"},"Dashboard Ganadero"),t("p",{class:"hero-subtitle"}," Monitorea tu operación ganadera en tiempo real. Estadísticas, tendencias y métricas clave para una gestión eficiente. ")],-1)),t("div",lt,[t("button",{class:"btn btn-outline",onClick:Y,disabled:y.value},[o[1]||(o[1]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),$(" "+u(y.value?"Actualizando...":"Actualizar"),1)],8,ct)])])]),t("section",rt,[(a(!0),n(h,null,m(S.value,e=>(a(),n("div",{class:"stat-card",key:e.id},[t("div",{class:A(["stat-icon",e.colorClass])},[(a(),z(B(e.icon)))],2),t("div",dt,[t("h3",ut,u(e.value),1),t("p",pt,u(e.label),1),e.trend?(a(),n("div",{key:0,class:A(["stat-trend",e.trendClass])},[(a(),n("svg",vt,[e.trend>0?(a(),n("path",ht)):(a(),n("path",mt))])),t("span",null,u(Math.abs(e.trend))+"%",1)],2)):ot("",!0)])]))),128))]),t("div",ft,[t("section",kt,[t("header",_t,[o[3]||(o[3]=t("h2",{class:"panel-title"},"Producción por Mes",-1)),t("div",bt,[X(t("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>I.value=e),class:"select-input",onChange:E},[(a(!0),n(h,null,m(H.value,e=>(a(),n("option",{key:e,value:e},u(e),9,gt))),128))],544),[[Z,I.value]])])]),t("div",yt,[_.value.length?(a(),n("div",Ct,[t("div",Mt,[(a(!0),n(h,null,m(_.value,(e,l)=>(a(),n("div",{key:l,class:"chart-bar",style:F({height:`${e.value/T.value*100}%`}),title:`${e.month}: ${e.value}L`},[t("span",Vt,u(e.value)+"L",1)],12,Dt))),128))]),t("div",xt,[(a(!0),n(h,null,m(_.value,e=>(a(),n("span",{key:e.month,class:"chart-label"},u(e.month),1))),128))])])):(a(),n("div",wt,[...o[4]||(o[4]=[t("div",{class:"empty-icon"},"📊",-1),t("p",null,"No hay datos de producción para mostrar",-1)])]))])]),t("section",At,[t("header",Ft,[o[6]||(o[6]=t("h2",{class:"panel-title"},"Actividad Reciente",-1)),f(i,{to:"/ganado",class:"btn btn-outline btn-sm"},{default:k(()=>[...o[5]||(o[5]=[$("Ver todo",-1)])]),_:1})]),t("div",It,[D.value.length?(a(),n("div",jt,[(a(!0),n(h,null,m(D.value,e=>(a(),n("div",{key:e.id,class:"activity-item"},[t("div",{class:A(["activity-icon",e.type])},[(a(),z(B(e.icon)))],2),t("div",Lt,[t("p",$t,u(e.title),1),t("p",zt,u(e.description),1),t("span",Bt,u(O(e.date)),1)])]))),128))])):(a(),n("div",St,[...o[7]||(o[7]=[t("p",null,"No hay actividad reciente",-1)])]))])])]),t("section",Gt,[t("header",Ht,[o[8]||(o[8]=t("h2",{class:"panel-title"},"Distribución del Ganado",-1)),t("div",Tt,[t("button",{class:"btn btn-outline btn-sm",onClick:R},u(w.value==="farm"?"Ver por Tipo":"Ver por Finca"),1)])]),t("div",Nt,[t("div",qt,[C.value.length?(a(),n("div",Rt,[t("div",Et,[(a(!0),n(h,null,m(C.value,(e,l)=>(a(),n("div",{key:e.name,class:"pie-segment",style:F(U(e,l)),title:`${e.name}: ${e.value} (${e.percentage}%)`},null,12,Yt))),128))]),t("div",Jt,[(a(!0),n(h,null,m(C.value,(e,l)=>(a(),n("div",{key:e.name,class:"legend-item"},[t("div",{class:"legend-color",style:F({backgroundColor:K(l)})},null,4),t("span",Ot,u(e.name),1),t("span",Ut,u(e.value),1)]))),128))])])):(a(),n("div",Pt,[...o[9]||(o[9]=[t("p",null,"No hay datos de distribución",-1)])]))])])]),t("section",Kt,[o[17]||(o[17]=t("header",{class:"panel-header"},[t("h2",{class:"panel-title"},"Acciones Rápidas")],-1)),t("div",Qt,[f(i,{to:"/ganado",class:"quick-action-card"},{default:k(()=>[...o[10]||(o[10]=[t("div",{class:"action-icon livestock"},[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Gestionar Ganado"),t("p",null,"Inventario y registro de animales")],-1)])]),_:1}),f(i,{to:"/produccion",class:"quick-action-card"},{default:k(()=>[...o[11]||(o[11]=[t("div",{class:"action-icon production"},[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Control Productivo"),t("p",null,"Registrar producción diaria")],-1)])]),_:1}),f(i,{to:"/sanidad",class:"quick-action-card"},{default:k(()=>[...o[12]||(o[12]=[t("div",{class:"action-icon health"},[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Control Sanitario"),t("p",null,"Vacunas y tratamientos médicos")],-1)])]),_:1}),f(i,{to:"/reproduccion",class:"quick-action-card"},{default:k(()=>[...o[13]||(o[13]=[t("div",{class:"action-icon reproduction"},[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Gestión Reproductiva"),t("p",null,"Servicios, gestaciones y partos")],-1)])]),_:1}),f(i,{to:"/fincas",class:"quick-action-card"},{default:k(()=>[...o[14]||(o[14]=[t("div",{class:"action-icon farms"},[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Gestionar Fincas"),t("p",null,"Ubicaciones y propiedades")],-1)])]),_:1}),t("button",{class:"quick-action-card",onClick:J},[...o[15]||(o[15]=[t("div",{class:"action-icon reports"},[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Generar Reportes"),t("p",null,"Informes y estadísticas")],-1)])]),f(i,{to:"/usuarios",class:"quick-action-card"},{default:k(()=>[...o[16]||(o[16]=[t("div",{class:"action-icon users"},[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1),t("div",{class:"action-content"},[t("h3",null,"Gestión de Usuarios"),t("p",null,"Accesos y permisos")],-1)])]),_:1})])])])}}},ee=st(Wt,[["__scopeId","data-v-2b63cead"]]);export{ee as default};
