import{u as h,x as c,f as x,c as i,o as l,a as s,j as m,q as p,y as f,t as d,d as V,w as k,r as B,z as C,A as N,B as q,e as S,l as T}from"./index-Na7mEAWg.js";const A={class:"surface-panel"},I={class:"form-grid"},j={key:0,class:"form-error"},z={class:"form-grid"},D={key:0,class:"form-error"},E={style:{display:"flex",gap:"1rem","align-items":"center","justify-content":"space-between"}},M=["disabled"],G={__name:"LoginView",setup(R){const w=N(),b=q(),{login:y}=h(),{pushToast:u}=T(),o=c({email:"",password:""}),t=c({email:"",password:""}),a=x(!1);function g(){return t.email=o.email?"":"Ingresa tu correo.",t.password=o.password?"":"Ingresa tu contrasena.",!t.email&&!t.password}async function v(){if(g()){a.value=!0;try{await y({email:o.email,password:o.password}),u("Sesion iniciada correctamente","success");const r=b.query.redirect||"/dashboard";w.push(r)}catch(r){u(r.message||"No se pudo iniciar sesion","error")}finally{a.value=!1}}}return(r,e)=>{const _=B("router-link");return l(),i("section",A,[e[5]||(e[5]=s("div",{style:{"text-align":"center","margin-bottom":"2rem"}},[s("h1",{class:"hero-title",style:{"font-size":"2rem"}},"Bienvenido a Geprogan"),s("p",{class:"hero-subtitle"},"Autentica tu sesión para acceder al tablero futurista.")],-1)),s("form",{onSubmit:C(v,["prevent"]),class:"form-grid",novalidate:""},[s("label",I,[e[2]||(e[2]=s("span",{class:"form-label"},"Correo electrónico",-1)),m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.email=n),type:"email",class:"form-control",autocomplete:"email",placeholder:"usuario@dominio.com",required:""},null,512),[[f,o.email,void 0,{trim:!0}]]),t.email?(l(),i("span",j,d(t.email),1)):p("",!0)]),s("label",z,[e[3]||(e[3]=s("span",{class:"form-label"},"Contraseña",-1)),m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o.password=n),type:"password",class:"form-control",autocomplete:"current-password",placeholder:"****",required:""},null,512),[[f,o.password]]),t.password?(l(),i("span",D,d(t.password),1)):p("",!0)]),s("div",E,[V(_,{class:"btn btn-outline",to:"/"},{default:k(()=>[...e[4]||(e[4]=[S("Volver al inicio",-1)])]),_:1}),s("button",{class:"btn btn-primary",type:"submit",disabled:a.value},d(a.value?"Ingresando...":"Entrar"),9,M)])],32)])}}};export{G as default};
